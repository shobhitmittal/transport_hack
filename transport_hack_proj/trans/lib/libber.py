import time
import requests
from threading import Thread

def myfunc(url,data_return):
	try:
		req_data= requests.get(url,verify=False)
	except requests.exceptions.ConnectionError:
		try:
			req_data= requests.get(url,verify=False)
		except requests.exceptions.ConnectionError:
			pass
		except Exception as err:
			print err
			req_data= requests.get(url,verify=False)
	if req_data and req_data.status_code == requests.codes.ok:
		data_req=req_data.json()
		print time.time(),'request complete'
    	data_return.append(data_req)
    #print "sleeping 5 sec from thread %d" % i
    #time.sleep(5)
    #print "finished sleeping from thread %d" % i

def run_threads(url_lists,number_threads=70):
	start=time.time()
	data_return=[]
	for url_list_iter in xrange(0,len(url_lists),number_threads):
		if url_lists[url_list_iter:url_list_iter+number_threads]:
			for url in url_lists[url_list_iter:url_list_iter+number_threads]:
				t = Thread(target=myfunc, args=(url,data_return,))
				t.start()
			t.join()
		else:
			break
	print time.time()-start
	return data_return

if __name__ == '__main__':
	url_lists=['http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/','http://api.railwayapi.com/route/train/17255/apikey/gcpxs4771/']
	print len(url_lists)
	print run_threads(url_lists)